@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthStateProvider


@code {
    protected override async Task OnInitializedAsync() {
        var authState = await AuthStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        if (user.Identity?.IsAuthenticated == true) {
            if (user.IsInRole("Admin")) {
                Navigation.NavigateTo("/admin/dashboard", true);
            } else {
                Navigation.NavigateTo("/client/dashboard", true);
            }
        } else {
            Navigation.NavigateTo("/login", true);
        }
    }
}
